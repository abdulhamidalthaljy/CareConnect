<header class="bg-white border-b">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center py-4">
      <a href="{{ url_for('main.index') }}" class="flex items-center space-x-3">
        <div
          class="bg-gradient-to-tr from-blue-500 to-indigo-600 text-white rounded-full p-2 shadow"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 8c-3 0-5 2-5 4s2 4 5 4 5-2 5-4-2-4-5-4z"
            ></path>
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 4v4"
            ></path>
          </svg>
        </div>
        <span class="text-lg font-semibold text-gray-900">CareConnect</span>
      </a>

      <nav class="hidden md:flex items-center space-x-6 text-sm">
        <a
          href="{{ url_for('main.index') }}"
          class="text-gray-600 hover:text-gray-900"
          >Home</a
        >
        {% if current_user.is_authenticated %}
        <a
          href="{{ url_for('main.dashboard') }}"
          class="text-gray-600 hover:text-gray-900"
          >Dashboard</a
        >
        {% if (current_user.role or '')|lower == 'doctor' %}
        <a
          href="{{ url_for('appointments.doctor_appointments') }}"
          class="text-gray-600 hover:text-gray-900"
          >Appointments</a
        >
        {% else %}
        <a
          href="{{ url_for('appointments.patient_appointments') }}"
          class="text-gray-600 hover:text-gray-900"
          >Appointments</a
        >
        {% endif %}
        <a
          href="{{ url_for('chat.chat_page') }}"
          class="text-gray-600 hover:text-gray-900"
          >Chat</a
        >
        <a
          href="{{ url_for('auth.logout') }}"
          class="text-gray-600 hover:text-gray-900"
          >Logout</a
        >
        {% else %}
        <a
          href="{{ url_for('auth.login') }}"
          class="text-gray-600 hover:text-gray-900"
          >Login</a
        >
        <a
          href="{{ url_for('auth.register') }}"
          class="text-gray-600 hover:text-gray-900"
          >Register</a
        >
        {% endif %}
      </nav>

      <div class="flex items-center space-x-4">
        <div class="hidden sm:block">
          <form action="{{ url_for('main.index') }}" method="GET">
            <label for="search" class="sr-only">Search</label>
            <div class="relative">
              <input
                id="search"
                name="q"
                class="py-2 pl-3 pr-10 border rounded-md text-sm"
                placeholder="Search patients, files..."
              />
              <button
                type="submit"
                class="absolute right-0 top-0 mt-1 mr-1 text-gray-500"
              >
                <svg
                  class="w-4 h-4"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M21 21l-4.35-4.35"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M11 19a8 8 0 100-16 8 8 0 000 16z"
                  ></path>
                </svg>
              </button>
            </div>
          </form>
        </div>

        <div class="md:hidden">
          <button
            id="mobile-menu-btn"
            class="p-2 rounded-md text-gray-600 hover:bg-gray-100"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile menu (simple toggle via small JS in app.js if needed) -->
  <div id="mobile-menu" class="md:hidden hidden border-t">
    <div class="px-4 pt-2 pb-4 space-y-2">
      <a href="{{ url_for('main.index') }}" class="block text-gray-700">Home</a>
      {% if current_user.is_authenticated %}
      <a href="{{ url_for('main.dashboard') }}" class="block text-gray-700"
        >Dashboard</a
      >
      {% if (current_user.role or '')|lower == 'doctor' %}
      <a
        href="{{ url_for('appointments.doctor_appointments') }}"
        class="block text-gray-700"
        >Appointments</a
      >
      {% else %}
      <a
        href="{{ url_for('appointments.patient_appointments') }}"
        class="block text-gray-700"
        >Appointments</a
      >
      {% endif %}
      <a href="{{ url_for('chat.chat_page') }}" class="block text-gray-700"
        >Chat</a
      >
      <a href="{{ url_for('auth.logout') }}" class="block text-gray-700"
        >Logout</a
      >
      {% else %}
      <a href="{{ url_for('auth.login') }}" class="block text-gray-700"
        >Login</a
      >
      <a href="{{ url_for('auth.register') }}" class="block text-gray-700"
        >Register</a
      >
      {% endif %}
    </div>
  </div>
</header>
